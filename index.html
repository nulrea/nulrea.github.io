<!DOCTYPE html>
<html lang="en">
    <head>
        <link rel="stylesheet" href=".\styles.css">
        <title>Fanmade florr.io calculators</title>
        <script src="script.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>
        <meta name="description" content="florr.io calculators done by me.">
        <meta name="keywords" content="florr.io XP calculator">
        <meta name="author" content="nulrea from florr.io">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>title</title>
    </head>
    <body>
        <p>
            Contents:
        </p>
        <div style="margin: 15px;">
            <a href="nulrea.github.io#florr.io_content">
                florr.io
            </a>
            <div style="margin-left: 15px;">
                <a href="nulrea.github.io#crafting_calculator">
                    Crafting calculator
                </a>
            </div>
            <div style="margin-left: 15px;">
                <a href="nulrea.github.io#xp_calculator">
                    XP calculator
                </a>
            </div>
        </div>
        <div style="padding: 10px;">
        <button onclick="ADVANCED_MODE_toggle()" class="button_toggle" id="advanced_mode_btn">
            Enable advanced mode
        </button>
        </div>
        <!-- FLORR.IO THINGS -->
        <div id="florr.io_content">
            <div>
                <h1>
                    DPS Calculator (WIP)
                </h1>
                <table style="width: 100%;">
                    <tr>
                        <td>
                            <img id="petal_img1" src="https://upload.wikimedia.org/wikipedia/commons/5/59/Empty.png" alt="petal image" width="100%">
                        </td>
                        <td>
                            <img id="petal_img2" src="https://upload.wikimedia.org/wikipedia/commons/5/59/Empty.png" alt="petal image" width="100%">
                        </td>
                        <td>
                            <img id="petal_img3" src="https://upload.wikimedia.org/wikipedia/commons/5/59/Empty.png" alt="petal image" width="100%">
                        </td>
                        <td>
                            <img id="petal_img4" src="https://upload.wikimedia.org/wikipedia/commons/5/59/Empty.png" alt="petal image" width="100%">
                        </td>
                        <td>
                            <img id="petal_img5" src="https://upload.wikimedia.org/wikipedia/commons/5/59/Empty.png" alt="petal image" width="100%">
                        </td>
                        <td>
                            <img id="petal_img6" src="https://upload.wikimedia.org/wikipedia/commons/5/59/Empty.png" alt="petal image" width="100%">
                        </td>
                        <td>
                            <img id="petal_img7" src="https://upload.wikimedia.org/wikipedia/commons/5/59/Empty.png" alt="petal image" width="100%">
                        </td>
                        <td>
                            <img id="petal_img8" src="https://upload.wikimedia.org/wikipedia/commons/5/59/Empty.png" alt="petal image" width="100%">
                        </td>
                        <td>
                            <img id="petal_img9" src="https://upload.wikimedia.org/wikipedia/commons/5/59/Empty.png" alt="petal image" width="100%">
                        </td>
                        <td>
                            <img id="petal_img10" src="https://upload.wikimedia.org/wikipedia/commons/5/59/Empty.png" alt="petal image" width="100%">
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <select id="petal_rarity1" onchange="on_petal_change(1)">
                                <option value="0" id="common_option">
                                    Common
                                </option>
                                <option value="1" id="unusual_option">
                                    Unusual
                                </option>
                                <option value="2" id="rare_option">
                                    Rare
                                </option>
                                <option value="3" id="epic_option">
                                    Epic
                                </option>
                                <option value="4" id="legendary_option">
                                    Legendary
                                </option>
                                <option value="5" id="mythic_option">
                                    Mythic
                                </option>
                                <option value="6" id="ultra_option">
                                    Ultra
                                </option>
                                <option value="7" id="super_option">
                                    Super
                                </option>
                                <option value="8" id="unique_option">
                                    Unique
                                </option>
                            </select>
                            <select id="petal_type1" class="petal_type" onchange="on_petal_change(1)">
                                <option value="-1" id="invalid_option">
                                    Select a petal
                                </option>
                            </select>
                        </td>
                        <td>
                            <select id="petal_rarity2" onchange="on_petal_change(2)">
                                <option value="0" id="common_option">
                                    Common
                                </option>
                                <option value="1" id="unusual_option">
                                    Unusual
                                </option>
                                <option value="2" id="rare_option">
                                    Rare
                                </option>
                                <option value="3" id="epic_option">
                                    Epic
                                </option>
                                <option value="4" id="legendary_option">
                                    Legendary
                                </option>
                                <option value="5" id="mythic_option">
                                    Mythic
                                </option>
                                <option value="6" id="ultra_option">
                                    Ultra
                                </option>
                                <option value="7" id="super_option">
                                    Super
                                </option>
                                <option value="8" id="unique_option">
                                    Unique
                                </option>
                            </select>
                            <select id="petal_type2" class="petal_type" onchange="on_petal_change(2)">
                                <option value="-1" id="invalid_option">
                                    Select a petal
                                </option>
                            </select>
                        </td>
                        <td>
                            <select id="petal_rarity3" onchange="on_petal_change(3)">
                                <option value="0" id="common_option">
                                    Common
                                </option>
                                <option value="1" id="unusual_option">
                                    Unusual
                                </option>
                                <option value="2" id="rare_option">
                                    Rare
                                </option>
                                <option value="3" id="epic_option">
                                    Epic
                                </option>
                                <option value="4" id="legendary_option">
                                    Legendary
                                </option>
                                <option value="5" id="mythic_option">
                                    Mythic
                                </option>
                                <option value="6" id="ultra_option">
                                    Ultra
                                </option>
                                <option value="7" id="super_option">
                                    Super
                                </option>
                                <option value="8" id="unique_option">
                                    Unique
                                </option>
                            </select>
                            <select id="petal_type3" class="petal_type" onchange="on_petal_change(3)">
                                <option value="-1" id="invalid_option">
                                    Select a petal
                                </option>
                            </select>
                        </td>
                        <td>
                            <select id="petal_rarity4" onchange="on_petal_change(4)">
                                <option value="0" id="common_option">
                                    Common
                                </option>
                                <option value="1" id="unusual_option">
                                    Unusual
                                </option>
                                <option value="2" id="rare_option">
                                    Rare
                                </option>
                                <option value="3" id="epic_option">
                                    Epic
                                </option>
                                <option value="4" id="legendary_option">
                                    Legendary
                                </option>
                                <option value="5" id="mythic_option">
                                    Mythic
                                </option>
                                <option value="6" id="ultra_option">
                                    Ultra
                                </option>
                                <option value="7" id="super_option">
                                    Super
                                </option>
                                <option value="8" id="unique_option">
                                    Unique
                                </option>
                            </select>
                            <select id="petal_type4" class="petal_type" onchange="on_petal_change(4)">
                                <option value="-1" id="invalid_option">
                                    Select a petal
                                </option>
                            </select>
                        </td>
                        <td>
                            <select id="petal_rarity5" onchange="on_petal_change(5)">
                                <option value="0" id="common_option">
                                    Common
                                </option>
                                <option value="1" id="unusual_option">
                                    Unusual
                                </option>
                                <option value="2" id="rare_option">
                                    Rare
                                </option>
                                <option value="3" id="epic_option">
                                    Epic
                                </option>
                                <option value="4" id="legendary_option">
                                    Legendary
                                </option>
                                <option value="5" id="mythic_option">
                                    Mythic
                                </option>
                                <option value="6" id="ultra_option">
                                    Ultra
                                </option>
                                <option value="7" id="super_option">
                                    Super
                                </option>
                                <option value="8" id="unique_option">
                                    Unique
                                </option>
                            </select>
                            <select id="petal_type5" class="petal_type" onchange="on_petal_change(5)">
                                <option value="-1" id="invalid_option">
                                    Select a petal
                                </option>
                            </select>
                        </td>
                        <td>
                            <select id="petal_rarity6" onchange="on_petal_change(6)">
                                <option value="0" id="common_option">
                                    Common
                                </option>
                                <option value="1" id="unusual_option">
                                    Unusual
                                </option>
                                <option value="2" id="rare_option">
                                    Rare
                                </option>
                                <option value="3" id="epic_option">
                                    Epic
                                </option>
                                <option value="4" id="legendary_option">
                                    Legendary
                                </option>
                                <option value="5" id="mythic_option">
                                    Mythic
                                </option>
                                <option value="6" id="ultra_option">
                                    Ultra
                                </option>
                                <option value="7" id="super_option">
                                    Super
                                </option>
                                <option value="8" id="unique_option">
                                    Unique
                                </option>
                            </select>
                            <select id="petal_type6" class="petal_type" onchange="on_petal_change(6)">
                                <option value="-1" id="invalid_option">
                                    Select a petal
                                </option>
                            </select>
                        </td>
                        <td>
                            <select id="petal_rarity7" onchange="on_petal_change(7)">
                                <option value="0" id="common_option">
                                    Common
                                </option>
                                <option value="1" id="unusual_option">
                                    Unusual
                                </option>
                                <option value="2" id="rare_option">
                                    Rare
                                </option>
                                <option value="3" id="epic_option">
                                    Epic
                                </option>
                                <option value="4" id="legendary_option">
                                    Legendary
                                </option>
                                <option value="5" id="mythic_option">
                                    Mythic
                                </option>
                                <option value="6" id="ultra_option">
                                    Ultra
                                </option>
                                <option value="7" id="super_option">
                                    Super
                                </option>
                                <option value="8" id="unique_option">
                                    Unique
                                </option>
                            </select>
                            <select id="petal_type7" class="petal_type" onchange="on_petal_change(7)">
                                <option value="-1" id="invalid_option">
                                    Select a petal
                                </option>
                            </select>
                        </td>
                        <td>
                            <select id="petal_rarity8" onchange="on_petal_change(8)">
                                <option value="0" id="common_option">
                                    Common
                                </option>
                                <option value="1" id="unusual_option">
                                    Unusual
                                </option>
                                <option value="2" id="rare_option">
                                    Rare
                                </option>
                                <option value="3" id="epic_option">
                                    Epic
                                </option>
                                <option value="4" id="legendary_option">
                                    Legendary
                                </option>
                                <option value="5" id="mythic_option">
                                    Mythic
                                </option>
                                <option value="6" id="ultra_option">
                                    Ultra
                                </option>
                                <option value="7" id="super_option">
                                    Super
                                </option>
                                <option value="8" id="unique_option">
                                    Unique
                                </option>
                            </select>
                            <select id="petal_type8" class="petal_type" onchange="on_petal_change(8)">
                                <option value="-1" id="invalid_option">
                                    Select a petal
                                </option>
                            </select>
                        </td>
                        <td>
                            <select id="petal_rarity9" onchange="on_petal_change(9)">
                                <option value="0" id="common_option">
                                    Common
                                </option>
                                <option value="1" id="unusual_option">
                                    Unusual
                                </option>
                                <option value="2" id="rare_option">
                                    Rare
                                </option>
                                <option value="3" id="epic_option">
                                    Epic
                                </option>
                                <option value="4" id="legendary_option">
                                    Legendary
                                </option>
                                <option value="5" id="mythic_option">
                                    Mythic
                                </option>
                                <option value="6" id="ultra_option">
                                    Ultra
                                </option>
                                <option value="7" id="super_option">
                                    Super
                                </option>
                                <option value="8" id="unique_option">
                                    Unique
                                </option>
                            </select>
                            <select id="petal_type9" class="petal_type" onchange="on_petal_change(9)">
                                <option value="-1" id="invalid_option">
                                    Select a petal
                                </option>
                            </select>
                        </td>
                        <td>
                            <select id="petal_rarity10" onchange="on_petal_change(10)">
                                <option value="0" id="common_option">
                                    Common
                                </option>
                                <option value="1" id="unusual_option">
                                    Unusual
                                </option>
                                <option value="2" id="rare_option">
                                    Rare
                                </option>
                                <option value="3" id="epic_option">
                                    Epic
                                </option>
                                <option value="4" id="legendary_option">
                                    Legendary
                                </option>
                                <option value="5" id="mythic_option">
                                    Mythic
                                </option>
                                <option value="6" id="ultra_option">
                                    Ultra
                                </option>
                                <option value="7" id="super_option">
                                    Super
                                </option>
                                <option value="8" id="unique_option">
                                    Unique
                                </option>
                            </select>
                            <select id="petal_type10" class="petal_type" onchange="on_petal_change(10)">
                                <option value="-1" id="invalid_option">
                                    Select a petal
                                </option>
                            </select>
                        </td>
                    </tr>
                </table>
                <!--Environmental variables-->
                <table>
                    <tr>
                        <td>
                            Contact angle (in radians, will be replaced):
                        </td>
                        <td>
                            <input type="number" id="dps_theta" name="contact_angle" min="0" max="3.141592653589793" value="1.0" step="0.1"> rad
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Mob body damage:
                        </td>
                        <td>
                            <input type="number" id="dps_M_d" name="mob_body_damage" min="0" max="328050" value="21870" step="1">
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Mob armor:
                        </td>
                        <td>
                            <input type="number" id="dps_M_a" name="mob_armor" min="1" max="22453" value="583" step="1">
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Current Speed:
                        </td>
                        <td>
                            <input type="number" id="dps_R" name="current_speed" min="0.2" max="23.4" value="3.0" step="0.1"> rad/s
                        </td>
                    </tr>
                    <tr>
                        <td>
                            [TALENT] Duplicator:
                        </td>
                        <td>
                            <select id="dps_Dp" name="duplicator">
                                <option value="false">
                                    No
                                </option>
                                <option value="true">
                                    Yes
                                </option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            [ENVIRONMENTAL] Fly-in duration:
                        </td>
                        <td>
                            <input type="number" id="dps_E_fi" name="flyin_duration" min="0" max="1" value="0.16" step="0.01"> s
                        </td>
                    </tr>
                </table>
                <button onclick="calculate_dps_btn()">
                    Calculate DPS
                </button>
                <p id="dps_result">
                    Input please
                </p>
            </div>
            <div id="graph_container">
                <h1 id="crafting_calculator">
                    Crafting Probability Calculator (beta)
                </h1>
                <table>
                    <tr>
                        <td>
                            Rarity to craft from:
                        </td>
                        <td>
                            <select id="crafting_rarity" name="crafting_rarity">
                                <option value="0" id="common_option">
                                    Common
                                </option>
                                <option value="1" id="unusual_option">
                                    Unusual
                                </option>
                                <option value="2" id="rare_option">
                                    Rare
                                </option>
                                <option value="3" id="epic_option">
                                    Epic
                                </option>
                                <option value="4" id="legendary_option">
                                    Legendary
                                </option>
                                <option value="5" id="mythic_option">
                                    Mythic
                                </option>
                                <option value="6" id="ultra_option">
                                    Ultra
                                </option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Amount to craft:
                        </td>
                        <td>
                            <input type="number" id="crafting_amount" name="crafting_amount" min="5" max="1000000" value="5" step="1">
                        </td>
                    </tr>
                    <tr class="advanced_mode" style="display: none;">
                        <td>
                            <abbv title="Overwrites the default rarity name if this field is not blank.">Custom name:</abbv>
                        </td>
                        <td>
                            <input type="text" id="crafting_custom_name" name="custom_name" value="">
                        </td>
                    </tr>
                    <tr class="advanced_mode" style="display: none;">
                        <td>
                            <abbv title="Must be a value between 0 to 100 or the default is used.">Custom probability in percentage:</abbv>
                        </td>
                        <td>
                            <input type="number" id="crafting_custom_probability" name="custom_probability" min="0" max="100" value="0" step="1">
                        </td>
                    </tr>
                    <tr class="advanced_mode" style="display: none;">
                        <td>
                            <abbr title="Overwrites the color if not set to black.">Custom bar color</abbr>:
                        </td>
                        <td>
                            <input type="color" id="crafting_custom_bar_color1" name="custom_bar_color" value="#000000">
                        </td>
                    </tr>
                    <tr class="advanced_mode" style="display: none;">
                        <td>
                            <abbr title="Similar as above, but in text format.">Custom bar color (fallback)</abbr>:
                        </td>
                        <td>
                            <input type="text" id="crafting_custom_bar_color2" name="custom_bar_color_fallback" value="#000000">
                        </td>
                    </tr>
                    <tr class="advanced_mode" style="display: none;">
                        <td>
                            Custom accuracy:
                        </td>
                        <td>
                            <input type="number" id="crafting_accuracy_magnitude" name="accuracy_magnitude" min="6" max="325" value="10" step="1">
                        </td>
                    <tr>
                        <td>
                            <button onclick="calculate_func()">
                                Calculate the Probability
                            </button>
                        </td>
                        <td>
                            <button onclick="craft_sim()">
                                Simulate a craft
                            </button>
                        </td>
                    </tr>
                </table>
                <p id="crafting_message_text">
                    Left button to show probability (if the value is small enough), right button to simulate, and gives a close approximation.
                </p>
                <p id="crafting_sim_text">
                    Scroll down for more calculators.
                </p>
                <canvas id="crafting_result"></canvas>
            </div>
            <div>
                <h1 id="xp_calculator">
                    XP calculator (very buggy)
                </h1>
                <div id="fact">
                    <h4>
                        CORNER OF THE NERDS
                    </h4>
                    <h5>
                        The formula of the XP capacity, where your LEVEL is x (rounded to 2 significant digits):
                    </h5>
                    <p>
                        f(x) = 20×(floor(2x×1.05<sup>2x-1</sup>)+floor((2x+1)×1.05<sup>2x</sup>))
                    </p>
                </div>
                <br>
                <table>
                    <tr>
                        <td>
                            Level: 
                        </td>
                        <td>
                            <input type="number" id="level_input" name="level_input" min="1" value="1" step="1">
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Current XP:
                        </td>
                        <td>
                            <input type="number" id="XP_input" name="XP_input" min="0" value="0" step="1">
                        </td>
                    </tr>
                    <tr>
                        <td>
                            XP changes:
                        </td>
                        <td>
                            <input type="number" id="petal_input" name="petal_input" min="0" value="0" step="1">
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Direction:
                        </td>
                        <td>
                            <select id="XP_calculate_type" name="XP_type">
                                <option value="after">
                                    add
                                </option>
                                <option value="before">
                                    subtract
                                </option>
                            </select>
                        </td>
                    </tr>
                </table>
                <button onclick="on_calculate_XP()">
                    Calculate!
                </button>
                <p id="XP_result"></p>
                <h2>
                    XP difference calculator
                </h2>
                <table>
                    <tr>
                        <td>
                            Current Level: 
                        </td>
                        <td>
                            <input type="number" id="b_level_input" name="level_input" min="1" value="1" step="1">
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Current XP:
                        </td>
                        <td>
                            <input type="number" id="b_XP_input" name="XP_input" min="0" value="0" step="1">
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Goal Level: 
                        </td>
                        <td>
                            <input type="number" id="a_level_input" name="level_input" min="1" value="1" step="1">
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Goal XP:
                        </td>
                        <td>
                            <input type="number" id="a_XP_input" name="XP_input" min="0" value="0" step="1">
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <button onclick="level_difference()">
                                Calculate!
                            </button>
                        </td>
                        <td>
                            <button onclick="ii[0]=!ii[0];if(ii[0]){document.getElementById('xp_table').style.display='block';document.getElementById('toggle_xp_table').innerText='Hide XP per level';}else{document.getElementById('xp_table').style.display='none';document.getElementById('toggle_xp_table').innerText='Show XP per level';}level_difference()" id="toggle_xp_table">
                                Show XP per level
                            </button>
                        </td>
                    </tr>
                </table>
                <br>
                <!--
                <button onclick="Extension_toggle()" style="font-size: large;" class="button_toggle">
                    XPAND
                </button>
                -->
                <p id="xp_table" style="display: none;">
                    Press "Calculate!" to show.
                </p>
                <table>
                    <tr>
                        <td>
                            XP Difference:
                        </td>
                        <td id="xp_dif">
                            hi
                        </td>
                    </tr>
                </table>
            </div>
        </div>
        <p></p>
        <div id="cred">
            These calculators are unofficial, and are not totally accurate, as the data gathered was from the community itself. 
            Inspired by
            <a href="https://florrcrafting.glitch.me/">peterpeterp's calculator</a>
            but sadly his is unusable now anymore... (for his older version that is stored in Wayback Machine, see <a href="https://web.archive.org/web/20231015221225/https://florrcrafting.glitch.me/">this.</a>) Thanks for contributors that helped me dealing with problems I had.
            Thanks TheDarkMeme for the XP formula (although I modified it for the current system.)
        </div>
    </body>
</html>
